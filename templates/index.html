<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Career Catalyst - Opportunity Management</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css" rel="stylesheet">
    <style>
        .opportunity-card {
            transition: transform 0.2s;
            border-left: 4px solid #007bff;
        }
        .opportunity-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }
        .status-badge {
            font-size: 0.75rem;
        }
        .salary-info {
            color: #28a745;
            font-weight: 600;
        }
        .app-header {
            background: linear-gradient(135deg, #007bff, #0056b3);
            color: white;
        }
        .search-section {
            background-color: #f8f9fa;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 20px;
        }
        .no-opportunities {
            text-align: center;
            padding: 40px;
            color: #6c757d;
        }
        .loading {
            text-align: center;
            padding: 40px;
        }
        .job-search-section {
            background: linear-gradient(45deg, #28a745, #20c997);
            color: white;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 20px;
        }
        .job-result-card {
            transition: transform 0.2s;
            border-left: 4px solid #28a745;
        }
        .job-result-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }
        .external-link {
            color: #007bff;
        }
        .bookmark-btn {
            transition: all 0.3s;
        }
        .bookmark-btn:hover {
            transform: scale(1.05);
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header class="app-header py-4">
        <div class="container">
            <div class="row align-items-center">
                <div class="col">
                    <h1 class="mb-0"><i class="bi bi-briefcase me-2"></i>Career Catalyst</h1>
                    <p class="mb-0">Manage your career opportunities</p>
                </div>
                <div class="col-auto">
                    <button class="btn btn-light me-2" onclick="app.showJobSearchSection()">
                        <i class="bi bi-search me-1"></i>Search Jobs
                    </button>
                    <button class="btn btn-light" data-bs-toggle="modal" data-bs-target="#addOpportunityModal">
                        <i class="bi bi-plus-circle me-1"></i>Add Opportunity
                    </button>
                </div>
            </div>
        </div>
    </header>

    <div class="container mt-4">
        <!-- Navigation Tabs -->
        <ul class="nav nav-tabs mb-3" id="mainTabs" role="tablist">
            <li class="nav-item" role="presentation">
                <button class="nav-link active" id="opportunities-tab" data-bs-toggle="tab" data-bs-target="#opportunities" type="button" role="tab">
                    <i class="bi bi-briefcase me-1"></i>My Opportunities
                </button>
            </li>
            <li class="nav-item" role="presentation">
                <button class="nav-link" id="job-search-tab" data-bs-toggle="tab" data-bs-target="#job-search" type="button" role="tab">
                    <i class="bi bi-search me-1"></i>Search Jobs
                </button>
            </li>
            <li class="nav-item" role="presentation" style="display: none;" id="opportunity-detail-nav">
                <button class="nav-link" id="opportunity-detail-tab" data-bs-toggle="tab" data-bs-target="#opportunity-detail" type="button" role="tab">
                    <i class="bi bi-eye me-1"></i>Opportunity Detail
                </button>
            </li>
        </ul>

        <!-- Tab Content -->
        <div class="tab-content" id="mainTabContent">
            <!-- My Opportunities Tab -->
            <div class="tab-pane fade show active" id="opportunities" role="tabpanel">
                <!-- Search and Filter Section -->
        <div class="search-section">
            <div class="row g-3">
                <div class="col-md-4">
                    <label for="searchKeywords" class="form-label">Keywords</label>
                    <input type="text" class="form-control" id="searchKeywords" placeholder="Search title, company, description...">
                </div>
                <div class="col-md-3">
                    <label for="filterLocation" class="form-label">Location</label>
                    <input type="text" class="form-control" id="filterLocation" placeholder="City, State, Country">
                </div>
                <div class="col-md-2">
                    <label for="filterType" class="form-label">Type</label>
                    <select class="form-select" id="filterType">
                        <option value="">All Types</option>
                        <option value="FULL_TIME">Full Time</option>
                        <option value="PART_TIME">Part Time</option>
                        <option value="CONTRACT">Contract</option>
                        <option value="FREELANCE">Freelance</option>
                        <option value="INTERNSHIP">Internship</option>
                        <option value="TEMPORARY">Temporary</option>
                    </select>
                </div>
                <div class="col-md-2">
                    <label for="filterStatus" class="form-label">Status</label>
                    <select class="form-select" id="filterStatus">
                        <option value="">All Statuses</option>
                        <option value="SAVED">Saved</option>
                        <option value="APPLIED">Applied</option>
                        <option value="SCREENING">Screening</option>
                        <option value="INTERVIEWING">Interviewing</option>
                        <option value="OFFER">Offer</option>
                        <option value="REJECTED">Rejected</option>
                        <option value="WITHDRAWN">Withdrawn</option>
                        <option value="ACCEPTED">Accepted</option>
                    </select>
                </div>
                <div class="col-md-1">
                    <label class="form-label">&nbsp;</label>
                    <button class="btn btn-primary w-100" onclick="searchOpportunities()">
                        <i class="bi bi-search"></i>
                    </button>
                </div>
            </div>
            <div class="row mt-2">
                <div class="col-md-6">
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" id="filterRemote">
                        <label class="form-check-label" for="filterRemote">
                            Remote only
                        </label>
                    </div>
                </div>
                <div class="col-md-6 text-end">
                    <button class="btn btn-outline-secondary btn-sm" onclick="clearFilters()">
                        <i class="bi bi-x-circle me-1"></i>Clear Filters
                    </button>
                </div>
            </div>
        </div>

        <!-- Opportunities List -->
        <div id="opportunitiesSection">
            <div class="d-flex justify-content-between align-items-center mb-3">
                <h3>Your Opportunities</h3>
                <span id="opportunityCount" class="badge bg-primary"></span>
            </div>

            <div id="loadingIndicator" class="loading">
                <div class="spinner-border text-primary" role="status">
                    <span class="visually-hidden">Loading...</span>
                </div>
                <p class="mt-2">Loading opportunities...</p>
            </div>

            <div id="opportunitiesList" class="row g-3"></div>

            <div id="noOpportunities" class="no-opportunities" style="display: none;">
                <i class="bi bi-briefcase display-1 text-muted"></i>
                <h4 class="mt-3">No opportunities found</h4>
                <p>Add your first opportunity or adjust your search filters.</p>
                <button class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#addOpportunityModal">
                    <i class="bi bi-plus-circle me-1"></i>Add Opportunity
                </button>
            </div>

                <!-- Pagination -->
                <nav aria-label="Opportunities pagination" class="mt-4">
                    <ul class="pagination justify-content-center" id="pagination"></ul>
                </nav>
            </div>
            </div>

            <!-- Job Search Tab -->
            <div class="tab-pane fade" id="job-search" role="tabpanel">
                <!-- Job Search Section -->
                <div class="job-search-section">
                    <h3><i class="bi bi-search me-2"></i>Search for New Opportunities</h3>
                    <p class="mb-4">Find job opportunities from across the web and bookmark them to your personal list</p>

                    <form id="jobSearchForm">
                        <div class="row g-3">
                            <div class="col-md-5">
                                <label for="jobSearchTerm" class="form-label">Job Title or Keywords</label>
                                <input type="text" class="form-control" id="jobSearchTerm" placeholder="e.g., Python Developer, Data Scientist" required>
                            </div>
                            <div class="col-md-4">
                                <label for="jobSearchLocation" class="form-label">Location</label>
                                <input type="text" class="form-control" id="jobSearchLocation" placeholder="e.g., New York, NY" required>
                            </div>
                            <div class="col-md-2">
                                <label for="jobSearchResults" class="form-label">Results</label>
                                <select class="form-select" id="jobSearchResults">
                                    <option value="10">10</option>
                                    <option value="20" selected>20</option>
                                    <option value="30">30</option>
                                    <option value="50">50</option>
                                </select>
                            </div>
                            <div class="col-md-1">
                                <label class="form-label">&nbsp;</label>
                                <button type="submit" class="btn btn-light w-100" id="searchJobsBtn">
                                    <i class="bi bi-search"></i>
                                </button>
                            </div>
                        </div>
                    </form>
                </div>

                <!-- Job Search Results -->
                <div id="jobSearchResults">
                    <div id="jobSearchLoading" class="loading" style="display: none;">
                        <div class="spinner-border text-success" role="status">
                            <span class="visually-hidden">Searching...</span>
                        </div>
                        <p class="mt-2">Searching for jobs...</p>
                    </div>

                    <!-- Export button (hidden by default) -->
                    <div id="exportSection" class="d-flex justify-content-between align-items-center mb-3" style="display: none !important;">
                        <h5 class="mb-0">Search Results</h5>
                        <button class="btn btn-success" id="exportJobsBtn">
                            <i class="bi bi-download me-2"></i>Export Jobs
                        </button>
                    </div>

                    <div id="jobSearchResultsList" class="row g-3"></div>

                    <div id="noJobResults" class="no-opportunities" style="display: none;">
                        <i class="bi bi-search display-1 text-muted"></i>
                        <h4 class="mt-3">No jobs found</h4>
                        <p>Try adjusting your search terms or location.</p>
                    </div>
                </div>
            </div>

            <!-- Opportunity Detail Tab -->
            <div class="tab-pane fade" id="opportunity-detail" role="tabpanel">
                <div class="d-flex align-items-center mb-3">
                    <button class="btn btn-outline-secondary me-3" onclick="app.backToOpportunities()">
                        <i class="bi bi-arrow-left me-1"></i>Back to Opportunities
                    </button>
                    <h3 class="mb-0" id="detailOpportunityTitle"></h3>
                </div>

                <div id="opportunityDetailContent">
                    <!-- Content will be populated dynamically -->
                </div>
            </div>
        </div>
    </div>

    <!-- Add/Edit Opportunity Modal -->
    <div class="modal fade" id="addOpportunityModal" tabindex="-1">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="modalTitle">Add New Opportunity</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <form id="opportunityForm">
                    <div class="modal-body">
                        <input type="hidden" id="opportunityId">
                        <input type="hidden" id="userId" value="demo-user-123">

                        <div class="row g-3">
                            <div class="col-md-6">
                                <label for="title" class="form-label">Job Title *</label>
                                <input type="text" class="form-control" id="title" required>
                            </div>
                            <div class="col-md-6">
                                <label for="company" class="form-label">Company *</label>
                                <input type="text" class="form-control" id="company" required>
                            </div>
                            <div class="col-12">
                                <label for="description" class="form-label">Description *</label>
                                <textarea class="form-control" id="description" rows="3" required></textarea>
                            </div>
                            <div class="col-md-6">
                                <label for="type" class="form-label">Type *</label>
                                <select class="form-select" id="type" required>
                                    <option value="">Select Type</option>
                                    <option value="FULL_TIME">Full Time</option>
                                    <option value="PART_TIME">Part Time</option>
                                    <option value="CONTRACT">Contract</option>
                                    <option value="FREELANCE">Freelance</option>
                                    <option value="INTERNSHIP">Internship</option>
                                    <option value="TEMPORARY">Temporary</option>
                                </select>
                            </div>
                            <div class="col-md-6">
                                <label for="applicationStatus" class="form-label">Application Status *</label>
                                <select class="form-select" id="applicationStatus" required>
                                    <option value="SAVED">Saved</option>
                                    <option value="APPLIED">Applied</option>
                                    <option value="SCREENING">Screening</option>
                                    <option value="INTERVIEWING">Interviewing</option>
                                    <option value="OFFER">Offer</option>
                                    <option value="REJECTED">Rejected</option>
                                    <option value="WITHDRAWN">Withdrawn</option>
                                    <option value="ACCEPTED">Accepted</option>
                                </select>
                            </div>
                            <div class="col-md-6">
                                <label for="location" class="form-label">Location</label>
                                <input type="text" class="form-control" id="location" placeholder="City, State, Country">
                            </div>
                            <div class="col-md-6">
                                <label for="sourceUrl" class="form-label">Source URL</label>
                                <input type="url" class="form-control" id="sourceUrl" placeholder="https://...">
                            </div>
                            <div class="col-md-4">
                                <label for="salaryMin" class="form-label">Min Salary</label>
                                <input type="number" class="form-control" id="salaryMin" min="0" step="1000">
                            </div>
                            <div class="col-md-4">
                                <label for="salaryMax" class="form-label">Max Salary</label>
                                <input type="number" class="form-control" id="salaryMax" min="0" step="1000">
                            </div>
                            <div class="col-md-4">
                                <label for="salaryCurrency" class="form-label">Currency</label>
                                <select class="form-select" id="salaryCurrency">
                                    <option value="USD">USD</option>
                                    <option value="EUR">EUR</option>
                                    <option value="GBP">GBP</option>
                                    <option value="CAD">CAD</option>
                                </select>
                            </div>
                            <div class="col-md-6">
                                <label for="salaryPeriod" class="form-label">Salary Period</label>
                                <select class="form-select" id="salaryPeriod">
                                    <option value="YEARLY">Yearly</option>
                                    <option value="MONTHLY">Monthly</option>
                                    <option value="WEEKLY">Weekly</option>
                                    <option value="DAILY">Daily</option>
                                    <option value="HOURLY">Hourly</option>
                                </select>
                            </div>
                            <div class="col-md-6">
                                <div class="form-check mt-4">
                                    <input class="form-check-input" type="checkbox" id="isRemote">
                                    <label class="form-check-label" for="isRemote">
                                        Remote Position
                                    </label>
                                </div>
                            </div>
                            <div class="col-12">
                                <label for="requirements" class="form-label">Requirements (one per line)</label>
                                <textarea class="form-control" id="requirements" rows="3" placeholder="Enter each requirement on a new line"></textarea>
                            </div>
                            <div class="col-12">
                                <label for="notes" class="form-label">Notes</label>
                                <textarea class="form-control" id="notes" rows="2" placeholder="Personal notes about this opportunity"></textarea>
                            </div>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                        <button type="submit" class="btn btn-primary" id="saveButton">Save Opportunity</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- View Opportunity Modal -->
    <div class="modal fade" id="viewOpportunityModal" tabindex="-1">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="viewModalTitle"></h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body" id="viewModalBody">
                    <!-- Content will be populated dynamically -->
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                    <button type="button" class="btn btn-outline-primary" onclick="editOpportunity()">
                        <i class="bi bi-pencil me-1"></i>Edit
                    </button>
                    <button type="button" class="btn btn-outline-danger" onclick="deleteOpportunity()">
                        <i class="bi bi-trash me-1"></i>Delete
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Success/Error Toast -->
    <div class="toast-container position-fixed bottom-0 end-0 p-3">
        <div id="toast" class="toast" role="alert">
            <div class="toast-header">
                <i id="toastIcon" class="bi me-2"></i>
                <strong class="me-auto" id="toastTitle">Notification</strong>
                <button type="button" class="btn-close" data-bs-dismiss="toast"></button>
            </div>
            <div class="toast-body" id="toastMessage"></div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="/static/app.js"></script>
</body>
</html>